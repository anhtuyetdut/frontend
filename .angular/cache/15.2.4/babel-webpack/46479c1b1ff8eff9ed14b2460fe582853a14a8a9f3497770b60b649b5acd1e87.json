{"ast":null,"code":"import _asyncToGenerator from \"E:/DATN-102190048-NguyenThiAnhTuyet/DATN-102190048-Source/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport axios from 'axios';\nimport jwt_decode from 'jwt-decode';\nconst baseURL = 'http://ec2-43-207-102-176.ap-northeast-1.compute.amazonaws.com:5000';\nconst instance = axios.create({\n  baseURL: baseURL,\n  params: {}\n});\ninstance.interceptors.request.use( /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (config) {\n    const token = localStorage.getItem('token');\n    let exp;\n    if (token) {\n      const decode = jwt_decode(token);\n      exp = decode.exp;\n      const time = new Date();\n      let requesttime = Math.round(time.getTime() / 1000);\n      const refreshtoken = localStorage.getItem('refreshToken');\n      if (exp - requesttime < 15) {\n        yield axios.get(`${baseURL}/accounts/refresh`, {\n          headers: {\n            Authorization: 'Bearer ' + refreshtoken\n          }\n        }).then(response => {\n          const listTokens = response.data;\n          instance.defaults.headers.common['Authorization'] = `Bearer ${listTokens.data.token}`;\n          localStorage.setItem('token', listTokens.data.token);\n          localStorage.setItem('refreshToken', listTokens.data.refreshToken);\n        }).catch(error => error);\n      }\n    }\n    return config;\n  });\n  return function (_x) {\n    return _ref.apply(this, arguments);\n  };\n}());\nexport default instance;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}