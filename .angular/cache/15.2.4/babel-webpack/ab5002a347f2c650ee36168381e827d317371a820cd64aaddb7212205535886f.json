{"ast":null,"code":"import { jsPDF } from 'jspdf';\nimport 'jspdf-autotable';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../data.service\";\nimport * as i3 from \"agm-direction\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@agm/core\";\nfunction Map_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\", 16);\n    i0.ɵɵlistener(\"click\", function Map_p_15_Template_p_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const i_r4 = restoredCtx.index;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.thi(i_r4 + 1));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const thie_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(thie_r3);\n  }\n}\nconst _c0 = function () {\n  return {\n    suppressMarkers: true\n  };\n};\nfunction Map_agm_direction_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"agm-direction\", 17);\n  }\n  if (rf & 2) {\n    const i_r8 = ctx.index;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"origin\", ctx_r1.location[i_r8])(\"destination\", ctx_r1.location[i_r8 + 1])(\"renderOptions\", i0.ɵɵpureFunction0(3, _c0));\n  }\n}\nfunction Map_agm_marker_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"agm-marker\", 18);\n  }\n  if (rf & 2) {\n    const locatio_r9 = ctx.$implicit;\n    const j_r10 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"label\", ctx_r2.originLabel[j_r10])(\"latitude\", locatio_r9.lat)(\"longitude\", locatio_r9.lng)(\"markerDraggable\", false);\n  }\n}\nexport let Map = /*#__PURE__*/(() => {\n  class Map {\n    constructor(router, d) {\n      this.router = router;\n      this.d = d;\n      this.zoom = false;\n      this.title = 'map';\n      this.lat = 16.047079;\n      this.lng = 108.20623;\n      this.locations = this.d.vitri;\n      this.thien = [];\n      this.add = false;\n      this.hih = false;\n      this.siderbar = false;\n      this.list = false;\n      this.place = false;\n      this.index = 0;\n      this.trip = this.d.itinerary;\n      this.color = false;\n      this.color0 = false;\n      this.color1 = false;\n      this.color2 = false;\n      this.editt = true;\n      this.mapp = true;\n      this.originLabel = [];\n      this.destinationLabel = 'B';\n      this.waypointsLabel = '';\n      this.data = [];\n      this.id = 0;\n      this.colo1 = true;\n      this.colo2 = false;\n      this.colo3 = false;\n      this.location = this.locations[this.id][this.index];\n    }\n    ngOnInit() {\n      for (let i = 0; i < this.locations[0].length - 1; i++) {\n        // this.thien.push(100 - (this.locations[i].rating / 5) * 100 + 11.7);\n        this.thien.push('Day' + \" \" + (i + 2));\n      }\n      for (let j = 0; j < this.locations[this.id][this.index].length - 1; j++) {\n        // this.thien.push(100 - (this.locations[i].rating / 5) * 100 + 11.7);\n        this.originLabel.push((j + 1).toString());\n        console.log(this.originLabel);\n      }\n      console.log(this.locations[this.index][0]);\n    }\n    back() {\n      this.router.navigateByUrl('/search');\n    }\n    thi(i) {\n      document.querySelector('.add')?.classList.remove('add');\n      document.querySelectorAll('.itinerary-search_input_day_detail')[i].classList.add('add');\n      this.index = i;\n      console.log(this.index);\n      this.location = this.locations[this.id][this.index];\n      console.log(this.location);\n    }\n    map() {\n      this.mapp = false;\n      this.place = true;\n      this.editt = true;\n      this.color = true;\n      this.color0 = false;\n      this.color1 = false;\n      this.color2 = false;\n      this.router.navigateByUrl('/map');\n    }\n    edit() {\n      if (!localStorage.getItem('token')) {\n        alert('You must Sign in before do this');\n        this.router.navigateByUrl('/signin');\n      } else if (localStorage.getItem('token')) {\n        this.color2 = true;\n        this.color1 = false;\n        this.color = false;\n        this.mapp = true;\n        this.place = true;\n        this.editt = false;\n        this.router.navigateByUrl('/edit');\n      }\n    }\n    choice(value) {\n      this.id = value;\n      this.location = this.locations[this.id][this.index];\n      if (value == 0) {\n        this.colo1 = true;\n        this.colo2 = false;\n        this.colo3 = false;\n      } else if (value == 1) {\n        this.colo1 = false;\n        this.colo2 = true;\n        this.colo3 = false;\n      } else if (value == 2) {\n        this.colo1 = false;\n        this.colo2 = false;\n        this.colo3 = true;\n      }\n    }\n    unmap() {\n      this.color0 = true;\n      this.color = false;\n      this.color1 = false;\n      this.color2 = false;\n      this.mapp = true;\n      this.place = false;\n      this.editt = true;\n      this.router.navigateByUrl('/itinerary');\n    }\n    onPolylineUpdate(event) {\n      event.polylineOptions = {\n        strokeColor: \"red\",\n        strokeOpacity: 0.7,\n        strokeWeight: 5,\n        icons: null // set icons là null để bỏ nhãn của polyline\n      };\n    }\n\n    downloadPDF() {\n      const doc = new jsPDF();\n      console.log(this.d.tong);\n      // tạo bảng mới\n      const headers = [['Name', 'Time Start', 'Time End', 'Address']];\n      for (let i = 0; i < this.d.tong.length; i++) {\n        for (let j = 1; j < this.d.tong[i].length; j++) {\n          this.data.push([`${this.d.tong[i][j].name.toString()}`, this.d.tong[i][j].timeS, this.d.tong[i][j].timeE, 'Hai Chau, Da Nang']);\n          // [\n          //   'thien',\n          //   'thien',\n          //   'thien',\n          //   'thien'\n          // ]\n        }\n      }\n\n      doc.autoTable({\n        head: headers,\n        body: this.data,\n        startY: 20\n      });\n      doc.setFont(\"arial\");\n      doc.setFontSize(12);\n      // thêm văn bản khác nếu cần\n      doc.text('This is your itinerary', 10, 10);\n      // lưu tài liệu PDF\n      const pdfOutput = doc.output('blob');\n      const url = URL.createObjectURL(pdfOutput);\n      window.open(url);\n    }\n  }\n  Map.ɵfac = function Map_Factory(t) {\n    return new (t || Map)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DataService));\n  };\n  Map.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: Map,\n    selectors: [[\"map\"]],\n    inputs: {\n      zoom: \"zoom\"\n    },\n    decls: 28,\n    vars: 14,\n    consts: [[1, \"background\", 3, \"click\"], [1, \"backg\"], [1, \"choice\"], [1, \"choice-button\", 3, \"click\"], [1, \"itinerary\"], [1, \"itinerary-search\"], [1, \"itinerary-search_input\"], [1, \"itinerary-search_input_day\"], [1, \"itinerary-search_input_day_detail\", \"add\", 3, \"click\"], [\"class\", \"itinerary-search_input_day_detail\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"itinerary-search_input_siderbar\"], [1, \"itinerary-search_input_siderbar_button\", 3, \"click\"], [1, \"itinerary-search_input_siderbar_button\", \"color\", 3, \"click\"], [3, \"latitude\", \"longitude\", \"zoom\"], [3, \"origin\", \"destination\", \"renderOptions\", 4, \"ngFor\", \"ngForOf\"], [3, \"label\", \"latitude\", \"longitude\", \"markerDraggable\", 4, \"ngFor\", \"ngForOf\"], [1, \"itinerary-search_input_day_detail\", 3, \"click\"], [3, \"origin\", \"destination\", \"renderOptions\"], [3, \"label\", \"latitude\", \"longitude\", \"markerDraggable\"]],\n    template: function Map_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵlistener(\"click\", function Map_Template_div_click_0_listener() {\n          return ctx.back();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2)(3, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_3_listener() {\n          return ctx.choice(0);\n        });\n        i0.ɵɵtext(4, \"Option 1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_5_listener() {\n          return ctx.choice(1);\n        });\n        i0.ɵɵtext(6, \"Option 2\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"button\", 3);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_7_listener() {\n          return ctx.choice(2);\n        });\n        i0.ɵɵtext(8, \"Option 3\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(9, \"div\", 4)(10, \"div\", 5)(11, \"div\", 6)(12, \"div\", 7)(13, \"p\", 8);\n        i0.ɵɵlistener(\"click\", function Map_Template_p_click_13_listener() {\n          return ctx.thi(0);\n        });\n        i0.ɵɵtext(14, \"Day 1\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(15, Map_p_15_Template, 2, 1, \"p\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 10)(17, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_17_listener() {\n          return ctx.unmap();\n        });\n        i0.ɵɵtext(18, \"Itinerary\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_19_listener() {\n          return ctx.map();\n        });\n        i0.ɵɵtext(20, \"Map\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_21_listener() {\n          return ctx.downloadPDF();\n        });\n        i0.ɵɵtext(22, \"Export\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"button\", 11);\n        i0.ɵɵlistener(\"click\", function Map_Template_button_click_23_listener() {\n          return ctx.edit();\n        });\n        i0.ɵɵtext(24, \"Edit\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"agm-map\", 13);\n        i0.ɵɵtemplate(26, Map_agm_direction_26_Template, 1, 4, \"agm-direction\", 14);\n        i0.ɵɵtemplate(27, Map_agm_marker_27_Template, 1, 4, \"agm-marker\", 15);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵclassProp(\"colo1\", ctx.colo1);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"colo2\", ctx.colo2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵclassProp(\"colo3\", ctx.colo3);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngForOf\", ctx.thien);\n        i0.ɵɵadvance(10);\n        i0.ɵɵclassProp(\"zoom\", ctx.zoom);\n        i0.ɵɵproperty(\"latitude\", ctx.lat)(\"longitude\", ctx.lng)(\"zoom\", 10);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.location);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.location);\n      }\n    },\n    dependencies: [i3.AgmDirection, i4.NgForOf, i5.AgmMap, i5.AgmMarker],\n    styles: [\"agm-map[_ngcontent-%COMP%]{height:580px;width:98%;position:relative;z-index:5;top:2%;left:1%}.zoom[_ngcontent-%COMP%]{height:480px;z-index:1}@keyframes _ngcontent-%COMP%_addto{0%{top:0}to{bottom:100px}}.background[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:5}.choice[_ngcontent-%COMP%]{position:fixed;top:30%;width:10%;height:30%;z-index:15}.choice-button[_ngcontent-%COMP%]{width:80%;height:25%;border:none;background-color:#fff;color:#000;margin-bottom:15%;margin-left:5%;border-radius:12px;font-size:16px;font-weight:600}.backg[_ngcontent-%COMP%]{position:fixed;inset:0;background-image:url(nenchung4.20ac8e77fbd0c93c.jpeg);background-repeat:none;background-size:100%;z-index:1}.color1[_ngcontent-%COMP%]{background-color:#000;color:#fff}.itinerary[_ngcontent-%COMP%]{position:fixed;inset:5% 0;width:80%;margin-left:10%;background-color:#d9d9d9;display:flex;border-radius:16px;box-shadow:0 0 5px 3px #fff;z-index:10}.itinerary-search[_ngcontent-%COMP%]{margin-top:2%;width:97%;height:97%;margin-left:1.5%}.itinerary-search_input[_ngcontent-%COMP%]{width:100%;height:8%;background-color:#fff;border-radius:16px;box-shadow:0 0 3px 2px #b4b4b4;display:flex}.itinerary-search_place[_ngcontent-%COMP%]{width:100%;height:87%;overflow-y:scroll;overflow:-moz-scrollbars-none;-ms-overflow-style:none}.itinerary-search_place[_ngcontent-%COMP%]::-webkit-scrollbar{width:0!important;display:none}.itinerary-search_place_main[_ngcontent-%COMP%]{width:98%;height:29%;background-color:#fff;margin-top:2%;display:flex;cursor:pointer;border-radius:16px;box-shadow:0 0 3px 2px #b4b4b4;margin-left:1%}.itinerary-search_place_main_img[_ngcontent-%COMP%]{width:11%;height:65%;border-radius:50%;margin-top:3%;margin-left:5%;border:2px solid #326c8e;object-fit:cover}.itinerary-search_place_main_detail[_ngcontent-%COMP%]{width:60%;height:65%;margin-top:1.5%;margin-left:3%}.itinerary-search_place_main_detail_name[_ngcontent-%COMP%]{font-size:22px;margin:1.5% 0 0;font-weight:600}.itinerary-search_place_main_detail_extra[_ngcontent-%COMP%]{margin:1% 0 0;width:95%;font-size:18px}.itinerary-search_place_main_detail_extr[_ngcontent-%COMP%]{margin:1% 0 0;width:95%;font-size:16px;font-weight:600;color:#326c8e}.itinerary-search_place_main_detail_time[_ngcontent-%COMP%]{display:flex;margin-top:1%}.itinerary-search_place_main_detail_time_start[_ngcontent-%COMP%]{margin:1.5% 0 0;color:#326c8e;font-weight:600;font-size:16px}.itinerary-search_place_main_detail_time_end[_ngcontent-%COMP%]{color:#326c8e;font-weight:600;margin:1.5% 0 0 3%;font-size:16px}.start[_ngcontent-%COMP%]{position:relative;width:32%;height:22%;margin-top:1%}.fa-star[_ngcontent-%COMP%]{margin-top:2%;color:#e8ad16;margin-right:3%;font-size:18px}.overlay[_ngcontent-%COMP%]{background-color:#fff;width:0%;height:100%;mix-blend-mode:color;position:absolute;top:0;right:0}.itinerary-search_place_main_funtion[_ngcontent-%COMP%]{width:9%;height:90%;margin-top:3%;margin-left:5%}.itinerary-search_place_main_funtion_price[_ngcontent-%COMP%]{color:#0a8039;font-size:18px;border:1px solid #0a8039;text-align:center;border-radius:8px;height:30%;width:80%;line-height:55px;font-weight:600;margin:0 0 0 10%}.fa-trash[_ngcontent-%COMP%]{color:#c01111;font-size:26px;margin-top:50%;margin-left:35%}.itinerary-search_input_siderbar[_ngcontent-%COMP%]{width:90%;position:relative;left:8%}.itinerary-search_input_siderbar_button[_ngcontent-%COMP%]{border:none;margin-left:5%;width:15%;height:70%;border-radius:8px;background-color:#666565;color:#fff;font-weight:600;margin-top:1.2%;animation:_ngcontent-%COMP%_addto 2s ease-in}.itinerary-search_input_day[_ngcontent-%COMP%]{display:flex;width:65%}.itinerary-search_input_day_detail[_ngcontent-%COMP%]:first-child{border-top-left-radius:16px;border-bottom-left-radius:16px}.itinerary-search_input_day_detail[_ngcontent-%COMP%]{width:15%;height:100%;line-height:60px;text-align:center;margin:0;font-size:15px;font-weight:600;background-color:#fff;cursor:pointer}.add[_ngcontent-%COMP%]{font-size:24px;background-color:#797676;width:18%;height:80%;margin-top:.8%;margin-left:1%;border-radius:18px;line-height:50px;color:#fff}.fa-bars[_ngcontent-%COMP%]{font-size:26px;margin-left:50%;margin-top:1.5%}.siderbar[_ngcontent-%COMP%]{display:flex}.list[_ngcontent-%COMP%], .place[_ngcontent-%COMP%], .mapp[_ngcontent-%COMP%], .editt[_ngcontent-%COMP%], .buttonmap[_ngcontent-%COMP%], .buttonunmap[_ngcontent-%COMP%]{display:none}.color[_ngcontent-%COMP%]{background-color:#000}.hien[_ngcontent-%COMP%], .hienedit[_ngcontent-%COMP%], .hienmap[_ngcontent-%COMP%]{display:none}.colo1[_ngcontent-%COMP%], .colo2[_ngcontent-%COMP%], .colo3[_ngcontent-%COMP%]{background-color:#000;color:#fff}\"]\n  });\n  return Map;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}